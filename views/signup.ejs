<!DOCTYPE html>
<html>

<head>
	<title>注册页</title>
	<link rel='stylesheet' href='/stylesheets/style.css' />
</head>

<body>
	<div class="autodiv">
		<h1>注册页</h1>
		<h3>
			<font color='red'>
				<%= tishi %>
			</font>
		</h3>
		<form action="/signup" id="myform" name="myform" method="post">
			<label for="username">用户名<font color='red'>*</font></label><br />
			<input type="text" id="username" name="username" onblur="validate()" required="required"><br />
			<label for="showname">昵称<font color='red'>*</font></label><br />
			<input type="text" id="showname" name="showname" required="required"><br />
			<label for="password">密码<font color='red'>*</font></label><br />
			<input type="password" id="password" name="password" onblur="validate()" required="required"><br />
			<label for="password">重复密码<font color='red'>*</font></label><br />
			<input type="password" id="repassword" name="repassword" onkeyup="validate()" required="required"><br /><br />
			<button type="button" id="submitbutton" onclick="submitfrom()">注册</button>
			<a href="/"><button type="button">返回</button></a>
		</form>

		<p id='tishi'></p>
		<p id='tishi2'></p>
	</div>
</body>

<script>
	var reg = /^[0-9a-zA-Z]+$/  //校验用户名和密码

	function validate() {
		var name = document.getElementById("username").value;
		var pwd1 = document.getElementById("password").value;
		var pwd2 = document.getElementById("repassword").value;
		if (reg.test(name) && reg.test(pwd1) && pwd1.length >= 6) {
			document.getElementById("tishi").innerHTML = "<font color='green'>用户名、密码格式正确</font>";
			if (pwd1 === pwd2) {
				document.getElementById("tishi2").innerHTML = "<font color='green'>两次密码相同</font>";
				return 1;
			}
			else {
				document.getElementById("tishi2").innerHTML = "<font color='red'>两次密码不相同</font>";
			}
		}
		else {
			document.getElementById("tishi").innerHTML = "<font color='red'>用户名、密码格式错误</font>";
		}
	}

	function submitfrom() {
		var form = document.getElementById('myform');
		if (validate()) {
			form.submit();
		}
	}
</script>

</html>